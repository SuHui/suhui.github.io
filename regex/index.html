<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>RegEx2DFA</title>
    <link rel="stylesheet" type="text/css" href="assets/main.css">
    <link rel="stylesheet" type="text/css" href="assets/gh-fork-ribbon.css">
    <script src="assets/jquery-2.1.1.min.js"></script>
    <script src="assets/RegEx2Dot.js"></script>
    <script src="assets/viz.js"></script>
    <script>
var getParameter = function(key) {
  key = key.replace(/[\[]/, "\\[").replace(/[\]]/, "\\]");
  var regex = new RegExp("[\\?&]" + key + "=([^&#]*)"),
      results = regex.exec(location.search);
  return results == null ? "" : decodeURIComponent(results[1]);
}
var regEx2Dot = Module.cwrap('regEx2Dot', 'string', ['string']);
var regex, dot, svg;
$(function() {
  if(getParameter('regex')!='') {
    regex = getParameter('regex');
    $('#regex').attr('value', regex);
    dot = regEx2Dot(regex);
    svg = Viz(dot, "svg");
    $("#dfa").html(svg);
    $('#getDot').attr('download', 'dfa.dot');
    $('#getDot').attr('href', "data:text/vnd.graphviz;charset=utf-8,"+dot);
    $('#getSvg').attr('download', 'dfa.svg');
    $('#getSvg').attr('href', "data:image/svg+xml;charset=utf-8,"+svg);
    $('#button').css('display', 'block');
  }
});
    </script>
  </head>
  <body>
    <input id="regex" type="text" placeHolder="Regular expression here" value="(a|b)?(b|c)*(c|d)(e|f)+" onKeyPress="{ if(event.keyCode===13) window.location.replace(window.location.pathname+'?regex='+$('#regex').val()); }"></input>

    <div id="dfa">
      ⇪ <i> input your regular expression and press enter</i> ⇪
      <br>
      <br>
      This tool is made for my compiles exam, and may have further development.
      <br>
      Now concat, or(<code>|</code>),star(<code>*</code>), <code>?</code>and<code>+</code> are supported.
      <br>
    </div>
    <div class="github-fork-ribbon-wrapper left-bottom">
      <div class="github-fork-ribbon">
        <a href="https://suhui.github.io" target="_blank">Back to suhui</a>
      </div>
    </div>
  </body>
</html>
